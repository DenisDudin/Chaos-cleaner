# План: Создание первоначальной минимальной структуры проекта

## Цель (Objective)

Создать минимальный каркас монорепозитория, включающий:
- Структуру workspace: `front/`, `back/`, `docs/`, `AGENTS.md`, `README.md`
- Фронтенд: архитектура FSD, React + TypeScript, одна страница `/` с текстом "Hello World"
- Бэкенд: DDD-подход, Express или tRPC/Node, SQLite
- Минимальную связку фронта и бэка (один тестовый endpoint)
- Создание и заполнение файлов в `docs/`: `product.md`, `tech.md` (если их ещё нет)
- Везде соблюдать правила AICODE (anchor-комментарии, если нужны)

## Предлагаемые шаги (Proposed Steps)

1. **Создание структуры директорий**
   - Создать `front/` и `back/` в корне проекта
   - Проверить наличие `docs/` (уже существует)

2. **Инициализация фронтенда (front/)**
   - Создать React + TypeScript проект (Vite или Create React App)
   - Настроить структуру FSD: `src/features/`, `src/entities/`, `src/shared/`, `src/pages/`
   - Создать страницу `/` с текстом "Hello World"
   - Настроить базовый роутинг (React Router)
   - Добавить минимальную конфигурацию (package.json, tsconfig.json, vite.config.ts или аналог)
   - Настроить Tailwind CSS (согласно tech.md)

3. **Инициализация бэкенда (back/)**
   - Создать Node.js + TypeScript проект
   - Настроить структуру DDD: базовые папки для будущих модулей (parsing, aggregation, llm, presets, auth)
   - Настроить Express или tRPC (рекомендуется tRPC согласно tech.md)
   - Настроить SQLite (используя библиотеку типа `better-sqlite3` или `sqlite3`)
   - Создать один тестовый endpoint (например, `GET /api/health` или tRPC процедуру `health`)
   - Добавить базовую конфигурацию (package.json, tsconfig.json)

4. **Настройка связи фронт ↔ бэк**
   - На фронте настроить tRPC клиент (если используем tRPC) или fetch для Express
   - Создать тестовый вызов endpoint'а с фронта
   - Настроить CORS (если Express) или убедиться, что tRPC настроен корректно
   - Добавить базовую обработку ошибок

5. **Документация**
   - Проверить `docs/product.md` и `docs/tech.md` (уже существуют)
   - Обновить `README.md` с инструкциями по запуску проекта
   - Добавить базовые инструкции по установке зависимостей и запуску

6. **AICODE-комментарии**
   - Добавить `AICODE-NOTE` для архитектурных решений (выбор SQLite вместо Postgres для MVP, структура FSD/DDD)
   - Добавить `AICODE-TODO` для недоделок (отсутствие тестов, отсутствие валидации, отсутствие обработки ошибок в некоторых местах)

7. **Финальная проверка**
   - Убедиться, что проект запускается локально
   - Проверить, что фронт может связаться с бэком
   - Проверить соответствие структуры `tech.md`

## Возможные риски (Risks)

1. **Конфликт версий зависимостей**: React, TypeScript, Node.js могут иметь несовместимые версии
   - *Митигация*: Использовать стабильные LTS версии, проверить совместимость

2. **Проблемы с CORS**: При использовании Express могут возникнуть проблемы с CORS при локальной разработке
   - *Митигация*: Настроить CORS middleware, использовать tRPC (который решает это из коробки)

3. **Сложность настройки tRPC**: Если tRPC окажется слишком сложным для MVP
   - *Митигация*: Начать с Express + простого REST endpoint, позже мигрировать на tRPC

4. **Структура FSD может быть избыточной для одной страницы**: Для "Hello World" FSD может показаться оверинжинирингом
   - *Митигация*: Создать минимальную структуру, которая будет легко расширяться

5. **SQLite vs Postgres**: В tech.md указан Postgres, но в задаче SQLite для MVP
   - *Митигация*: Использовать SQLite с `AICODE-NOTE`, что это временное решение для MVP

## Стратегия отката (Rollback Strategy)

1. **Если что-то пошло не так на этапе инициализации**:
   - Откатить изменения через git (если уже закоммичено)
   - Или удалить созданные папки `front/` и `back/` и начать заново

2. **Если tRPC вызывает проблемы**:
   - Заменить на простой Express сервер с REST API
   - Добавить `AICODE-TODO` о миграции на tRPC позже

3. **Если структура FSD слишком сложная**:
   - Упростить до базовой структуры `src/components/`, `src/pages/`
   - Добавить `AICODE-TODO` о рефакторинге на FSD позже

4. **Если SQLite не работает**:
   - Использовать in-memory хранилище или JSON файлы временно
   - Добавить `AICODE-TODO` о настройке SQLite/Postgres

5. **Если связь фронт-бэк не работает**:
   - Упростить до статической страницы без бэка
   - Добавить `AICODE-TODO` о настройке связи позже

---

**Примечание**: План создан в соответствии с правилами из `CLAUDE.md` (AGENTS.md). Ожидается подтверждение от пользователя перед началом реализации.

